{% extends "chama/chama_base.html" %}
{% block content %}
<div class="container">
  <div class="box">
    <div class="top-header">
      <h3>{{ chama.chama_name }}</h3>
      <p class="description">{{ chama.chama_description }}</p>
    </div>

    <div class="chama-info">
      <div class="info-item">
        <label>Contribution Amount:</label>
        <span>Ksh {{ chama.chama_contribution_amount }}</span>
      </div>
      <div class="info-item">
        <label>Frequency:</label>
        <span>{{ chama.chama_contribution_frequency }}</span>
      </div>
      {% if chama.chama_custom_frequency_days %}
      <div class="info-item">
        <label>Custom Frequency (Days):</label>
        <span>{{ chama.chama_custom_frequency_days }}</span>
      </div>
      {% endif %}
      <div class="info-item">
        <label>Maximum Members:</label>
        <span>{{ chama.chama_max_members }}</span>
      </div>
      <div class="info-item">
        <label>Rota Type:</label>
        <span>{{ chama.chama_rota_type }}</span>
      </div>
    </div>

    <div class="members-section">
      <h4>Members ({{ members.count }})</h4>
      {% if members %}
        <ul class="member-list">
          {% for member in members %}
            <li>
              <span class="member-name">{{ member.user.user_first_name }}</span>
              <span class="member-role">{{ member.role|title }}</span>
            </li>
          {% endfor %}
        </ul>
      {% else %}
        <p class="no-members">No members yet.</p>
      {% endif %}
    </div>

    <div class="actions">
      {% if user.is_authenticated %}
        {% if not is_member %}
          <form method="post" action="">
            {% csrf_token %}
            <button type="submit" class="submit">Join Chama</button>
          </form>
        {% else %}
          <p class="joined-msg">You are already a member of this chama.</p>
        {% endif %}
      {% endif %}
    </div>
  </div>
</div>
{% endblock content %}
